<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVPro - Constructor de CV Premium</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="particles-js"></div>
    
    <!-- MEN√ö SUPERIOR MEJORADO -->
    <nav class="main-nav">
        <div class="nav-brand">
            <h1>CVPro</h1>
        </div>
        <div class="nav-links">
            <a href="#constructor" class="nav-link active">üè† Constructor</a>
            <a href="batalla.html" class="nav-link">‚öîÔ∏è Modo Batalla</a>
            <a href="ia-analysis.html" class="nav-link">ü§ñ An√°lisis IA</a>
            <a href="premium.html" class="nav-link premium-link">üíé Premium</a>
            <a href="users.html" class="nav-link">üë§ Mi Cuenta</a>
        </div>
    </nav>

    <div class="container">
        <!-- PANEL DE CONSTRUCCI√ìN -->
        <div class="builder-panel">
            <div class="panel-header">
                <h1>CVPro</h1>
                <p>Construye tu CV profesional en minutos</p>
            </div>

            <div class="controls">
                <div class="theme-selector">
                    <button class="theme-btn active" onclick="cambiarTema('claro')">‚òÄÔ∏è Claro</button>
                    <button class="theme-btn" onclick="cambiarTema('oscuro')">üåô Oscuro</button>
                </div>
                
                <div class="template-selector">
                    <button class="template-btn active" onclick="cambiarTemplate('template-1')">Template 1</button>
                    <button class="template-btn" onclick="cambiarTemplate('template-2')">Template 2</button>
                    <button class="template-btn" onclick="cambiarTemplate('template-3')">Template 3</button>
                </div>

                <!-- BOT√ìN DE SCORING INTEGRADO -->
                <button id="btn-analizar-cv" class="btn-scoring" onclick="mostrarPanelScoring()">
                    üìä Analizar Mi CV
                </button>

                <!-- NUEVOS BOTONES DE ACCI√ìN -->
                <div class="action-buttons">
                    <button class="action-btn export-pdf" onclick="exportarPDF()">
                        üìÑ Exportar PDF Premium
                    </button>
                    <button class="action-btn share-cv" onclick="compartirCV()">
                        üîó Compartir CV
                    </button>
                </div>
            </div>

            <form class="cv-form" id="cvForm">
                <!-- INFORMACI√ìN PERSONAL -->
                <div class="form-group">
                    <label for="nombre">Nombre Completo</label>
                    <input type="text" id="nombre" placeholder="Ej: Juan P√©rez" oninput="actualizarVistaPrevia()">
                </div>

                <div class="form-group">
                    <label for="titulo">T√≠tulo Profesional</label>
                    <input type="text" id="titulo" placeholder="Ej: Desarrollador Full Stack" oninput="actualizarVistaPrevia()">
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="ejemplo@email.com" oninput="actualizarVistaPrevia()">
                </div>

                <div class="form-group">
                    <label for="telefono">Tel√©fono</label>
                    <input type="tel" id="telefono" placeholder="+1 234 567 890" oninput="actualizarVistaPrevia()">
                </div>

                <div class="form-group">
                    <label for="resumen">Resumen Profesional</label>
                    <textarea id="resumen" placeholder="Describe tu experiencia y habilidades..." oninput="actualizarVistaPrevia()"></textarea>
                </div>

                <!-- EXPERIENCIA LABORAL -->
                <div class="form-group">
                    <div class="section-header">
                        <h3>Experiencia Laboral</h3>
                        <button type="button" class="add-btn" onclick="agregarExperiencia()">+ Agregar</button>
                    </div>
                    <div id="experiencias-container" class="dynamic-section">
                        <!-- Las experiencias se agregan aqu√≠ din√°micamente -->
                    </div>
                </div>

                <!-- EDUCACI√ìN -->
                <div class="form-group">
                    <div class="section-header">
                        <h3>Educaci√≥n</h3>
                        <button type="button" class="add-btn" onclick="agregarEducacion()">+ Agregar</button>
                    </div>
                    <div id="educacion-container" class="dynamic-section">
                        <!-- La educaci√≥n se agrega aqu√≠ din√°micamente -->
                    </div>
                </div>

                <!-- HABILIDADES -->
                <div class="form-group">
                    <label for="habilidades">Habilidades</label>
                    <textarea id="habilidades" placeholder="Lista tus habilidades separadas por comas..." oninput="actualizarVistaPrevia()"></textarea>
                </div>

                <!-- NUEVOS CAMPOS PREMIUM -->
                <div class="form-group">
                    <label for="idiomas">Idiomas</label>
                    <input type="text" id="idiomas" placeholder="Ej: Espa√±ol (Nativo), Ingl√©s (Avanzado)" oninput="actualizarVistaPrevia()">
                </div>

                <div class="form-group">
                    <label for="certificaciones">Certificaciones</label>
                    <textarea id="certificaciones" placeholder="Tus certificaciones profesionales..." oninput="actualizarVistaPrevia()"></textarea>
                </div>
            </form>
        </div>

        <!-- VISTA PREVIA -->
        <div class="preview-panel">
            <div class="preview-header">
                <h2>Vista Previa</h2>
                <div class="preview-actions">
                    <button class="action-btn" onclick="guardarCV()">üíæ Guardar</button>
                    <button class="action-btn" onclick="descargarCVJSON()">üìÅ Backup</button>
                </div>
            </div>
            
            <div class="cv-preview template-1" id="cv-preview">
                <!-- El CV se genera aqu√≠ din√°micamente -->
                <div class="cv-header">
                    <div class="cv-name">Tu Nombre</div>
                    <div class="cv-title">Tu T√≠tulo Profesional</div>
                </div>
                
                <div class="cv-section">
                    <div class="section-title">Resumen</div>
                    <p>Tu resumen profesional aparecer√° aqu√≠...</p>
                </div>
                
                <div class="cv-section">
                    <div class="section-title">Experiencia</div>
                    <p>Tu experiencia laboral aparecer√° aqu√≠...</p>
                </div>
                
                <div class="cv-section">
                    <div class="section-title">Educaci√≥n</div>
                    <p>Tu educaci√≥n aparecer√° aqu√≠...</p>
                </div>
                
                <div class="cv-section">
                    <div class="section-title">Habilidades</div>
                    <p>Tus habilidades aparecer√°n aqu√≠...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MINI PREVIEW -->
    <div class="mini-preview" id="mini-preview" onclick="scrollToPreview()">
        <div class="mini-header">
            <div class="mini-name">Vista Previa</div>
            <div class="mini-title">Click para ver</div>
        </div>
    </div>

    <!-- PANEL DE SHARE -->
    <div id="share-panel" class="share-panel">
        <div class="share-content">
            <h3>üîó Compartir tu CV</h3>
            <div class="share-url">
                <input type="text" id="share-url-input" readonly>
                <button onclick="copiarURL()">üìã</button>
            </div>
            <p class="share-note">Este enlace ser√° v√°lido por 30 d√≠as</p>
            <button class="cerrar-panel" onclick="cerrarSharePanel()">Cerrar</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Inicializar part√≠culas (MANTENIENDO TU C√ìDIGO ORIGINAL)
        function initParticles() {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('particles-js').appendChild(renderer.domElement);

            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 1500;
            const posArray = new Float32Array(particlesCount * 3);

            for(let i = 0; i < particlesCount * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 5;
            }

            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMaterial = new THREE.PointsMaterial({
                size: 0.005,
                color: 0xffffff
            });

            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particlesMesh);
            camera.position.z = 2;

            function animate() {
                requestAnimationFrame(animate);
                particlesMesh.rotation.x += 0.0005;
                particlesMesh.rotation.y += 0.0005;
                renderer.render(scene, camera);
            }
            animate();
        }

        // Inicializar cuando cargue la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            initParticles();
            cargarDatosGuardados();
            actualizarVistaPrevia();
            // Inicializar sistema de scoring
            setTimeout(inicializarSistemaScoring, 1000);
        });

        // Manejar redimensionado de ventana
        window.addEventListener('resize', function() {
            initParticles();
        });
    </script>
</body>
</html>